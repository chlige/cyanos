<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE>Strain &amp; Species Management</TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 3.0  (Linux)">
	<META NAME="AUTHOR" CONTENT="George Chlipala">
	<META NAME="CREATED" CONTENT="20080421;12543200">
	<META NAME="CHANGEDBY" CONTENT="George Chlipala">
	<META NAME="CHANGED" CONTENT="20091029;18411800">
	<META NAME="KEYWORDS" CONTENT="strain,add strain,delete strain,modify strain,taxonomy">
	<META NAME="MODULE" CONTENT="strain">
	<LINK REL="stylesheet" TYPE='text/css' HREF='help.css'>
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<A HREF='toc'>Main Table of Contents</A> | <A HREF='find'>Find Help</A> | <A HREF='search'>Search Help</A>
<H2>Strain &amp; Species Management</H2>
<HR WIDTH='90%' ALIGN='LEFT'/>
<P>Basic strain and species information can be managed in the CYANOS database.  Allowed attributes include strain ID, culture source, date added, date removed, removal reason, culture status, Latin binomial, default
media, project code and notes.</P>
<P><B><A NAME='toc'>Table of Contents</A></B>
<OL>
<LI><A HREF='#add'>Adding a Strain</A></LI>
<LI><A HREF='#view'>Viewing and Modifying a Strain</A></LI>
<LI><A HREF='#taxa'>Taxonomic Data</A>
	<ol>
	<li><a href="#taxon_browser">Taxon Browser</a></li>
	<li><a href="#taxon_sql">Taxonomic Information Storage</a></li>
	</ol>
</LI>
<LI><A HREF='#roles'>Required Roles</A></LI>
</OL>
</P>
<HR WIDTH='85%' ALIGN='LEFT'/>

<H2><A NAME='add'>Adding a Strain</A></H2>
<OL>
<LI><P>Select <B>Add New</B> from the <B>Strain</B> menu.<BR/>
<IMG SRC="strain01.png" NAME="graphics1" ALIGN=CENTER BORDER=0></P></LI>
<LI><P>Enter information into the <I>Add Strain</I> form.<BR/>
<IMG SRC="strain02.png" NAME="graphics2" ALIGN=CENTER BORDER=0></P></LI>
<LI><P>Click the <B><SPAN CLASS='exampleButton'>Add Strain</SPAN></B> Button.<BR/>
<IMG SRC="strain03.png" NAME="graphics3" ALIGN=CENTER BORDER=0></P></LI>
</OL>
<P>The strain is now added to the database and can be viewed on the master strain list.</P>
<A HREF='#toc'>Return to table of contents</A>
<HR WIDTH='85%' ALIGN='LEFT'/>

<H2><A NAME='view'>Viewing and Modifying a Strain</A></H2>
<P>Strain information can be accessed from various strain links within the CYANOS website as well as the strain search form that is presented on the main page and accessible via the menu <B>Strains</B> &gt; <B>Search</B>.  
An example of this list is seen in the following figure.</P>
<IMG SRC="strain04.png" NAME="graphics18" ALIGN=CENTER BORDER=0>
<P>Clicking on a strain, whether from the search list or a strain link within CYANOS, will  present the details of that strain.  
An example strain page is seen in the following figure.</P>
<IMG SRC="strain03.png" NAME="graphics19" ALIGN=CENTER BORDER=0>
<P>The top part of the page displays the attributes of the strain.  
If the user has permission to modify the strain, the <B><SPAN CLASS='exampleButton'>Edit Values</SPAN></B> button will be available and the user can click that button to display an editable form to change the strains attributes.</P>
<IMG SRC="strain05.png" NAME="graphics3" ALIGN=CENTER BORDER=0>
<P>The lower part of the page has sections that list records associated to the strain.  Each of these sections can be opened or closed by clicking on the green triangle to the left of the section title.  For example, if a user clicked on <I>Inoculations &amp; Field Collections</I>, the section would open to reveal a listing of inoculations or field
collections associated with this strain.</P>
<IMG SRC="strain06.png" NAME="graphics20" ALIGN=CENTER BORDER=0>
<P>Once the user is finished with a particular section it can be collapsed by clicking on the green triangle again.</P>
<A HREF='#toc'>Return to table of contents</A>
<HR WIDTH='85%' ALIGN='LEFT'/>

<H2><A NAME='taxa'>Taxonomic Data</A></H2>
<P>Taxonomic information can be stored in the <FONT FACE="Courier, monospace">taxon</FONT> and <FONT FACE="Courier, monospace">taxon_paths</FONT>  
tables of the CYANOS database.  This information can be tied to individual strains using the genus attribute of a strain record.  
The CYANOS web interface will automatically retrieve and present this information, if available. </p>
<P><IMG SRC="strain07.png" NAME="graphics21" ALIGN=CENTER BORDER=0></P>
<A HREF='#toc'>Return to table of contents</A>
<HR WIDTH='85%' ALIGN='LEFT'/>

<h3><a name="taxon_browser">Taxon Browser</a></h3>
<p>
 A <B>Taxa Browser</B> is available via the <B>Strain</B> menu as well as the taxonomy links provided on the <I>Strain Information</I> page.  
 The <B>Taxa Browser</B> also allows one to navigate strains based upon taxonomic data.</P>
<P><IMG SRC="taxon01.png" NAME="graphics21" ALIGN=CENTER BORDER=0></P>
<A HREF='#toc'>Return to table of contents</A>
<HR WIDTH='85%' ALIGN='LEFT'/>

<h3><a name="taxon_sql">Taxonomic Information Storage</a></h3>
<p>Taxonomic data in CYANOS is stored in two separate tables <FONT FACE="Courier, monospace">taxon</FONT> and <FONT FACE="Courier, monospace">taxon_paths</FONT> . 
<ul>
<li><p>The table <FONT FACE="Courier, monospace">taxon</FONT> stores the different taxonomic names possible.  
This table has two columns (<i>name</i> and <i>level</i>).</p>

<ul>
<li>The name column is used to store the actual taxonomic names, e.g. <i>Nostoc</i>, <i>Streptomyces</i>, or <i>Actinobacteria</i>.</li>
<li>The <i>level</i> column is used to indicate the taxonomic level of the associated name, e.g. kingdom, phylum, class, order, family, genus.</li>
</ul>

<table class='spreadsheet' style="margin-top:10px">
<tr bgcolor="#e6e6e6"><th width='50%'>name</th><th width='50%'>level</th></tr>
<tr><td>Cyanoprokaryota</td><td>phylum</td></tr>
<tr><td>Hormogoneae</td><td>class</td></tr>
<tr><td>Nostocales</td><td>order</td></tr>
<tr><td>Nostoc</td><td>genus</td></tr>
</table>

<p>All taxonomic names <em>MUST</em> be globally unique. Additionally, it is not necessary to store species names in the taxon table. 
The genus name is typically used by CYANOS link to the associated taxonomic names. (see below)</p></li>

<li><p>The table <i>taxon_paths</i> utilizes three columns to store relationship information among the taxonomic names store in the <i>taxon</i> table.
The three columns are <i>parent</i>, <i>child</i>, and <i>depth</i>.</p>
<ul>
<li>The columns <i>parent</i> and <i>child</i> store the two taxonomic names that have a relationship.</li>
<li>The column <i>depth</i> stores the node depth of the relationship of the two names. For example, a depth of "1" would indicate that the parent is the direct parent of the child node.
A depth of "2" would indicate that the parent is the "grandparent" of the child node and so on.
A depth of "0" indicates that the parent node IS the child node.</li>
</ul>

</li>
</ul>
<p>The table <FONT FACE="Courier, monospace">taxon_paths</FONT> is utilized by CYANOS to search the taxonomic records for all higher level names for any given taxonomic name.
For each taxonomic name in the <i>taxon</i> table, there MUST be records to indicate the relationship of all parent nodes as well as the name to itself.
For example the genus <i>Nostoc</i> should have "taxon_paths" records for its parent family, order, class, phylum, and kingdom.</p>


<table class='spreadsheet' style="margin-top:10px">
<tr bgcolor="#e6e6e6"><th width='33%'>parent</th><th width='33%'>child</th><th width="33%">level</th></tr>
<tr><td>Prokarya</td><td>Nostoc</td><td>5</td></tr>
<tr><td>Cyanoprokaryota</td><td>Nostoc</td><td>4</td></tr>
<tr><td>Hormogoneae</td><td>Nostoc</td><td>3</td></tr>
<tr><td>Nostocales</td><td>Nostoc</td><td>2</td></tr>
<tr><td>Nostocaceae</td><td>Nostoc</td><td>1</td></tr>
<tr><td>Nostoc</td><td>Nostoc</td><td>0</td></tr>
</table>


<p>This two table method of data storage does increase the work needed when inserting or deleting taxonomic records. 
However, it allows the flexibility to have arbitrary node depths at any point in the tree.  
For example, the standard naming scheme is kingdom, phylum, class, order, family, genus.
One could construct an table with these 5 columns and use a single record to find all of the associated taxonomic names of a genus.
However if one were to add a level of "subclass" the table would need to be altered to accommodate the new column "subclass".
This could be a potential issue given that some classes would have a subclass where as other classes may not have any subclasses.
From the standpoint of the database table, there is no issue with having a column with empty data.  
However, when constructing a tree, in order to navigate the taxonomic namespace, empty data results in nodes that lack an ID and thus errors in constructing a tree.
Given that updates to the table would only occur with changes in the taxonomic naming scheme (infrequently), 
it was decided that this small "expense" in more complex updating what worth the improved ability to construct taxonomic trees.</p>
<p>Furthermore, searching arbitrary levels of the taxonomic tree is simpler given that the taxonomic level, e.g. genus, family, or kingdom, is stored as a separate attribute and not tied to the column name.
From an informatics standpoint, all taxonomic names are now "equal" and one could utilize higher order taxonomic names as the "genus" of a strain, if a more specific name has not been determined.  
For example, if one knew that a strain was a member of the order <i>Actinomycetales</i>, however the genus had not yet been determined. 
In that case, CYANOS would still be able to find the taxonomic name and its "parents" and would display taxonomic information on the information page.
Consider the following strain record where the "genus" for the strain was set to the order "Oscillatoriales".</p>
<p align="center"><img src="taxon02.png"></p>
<p align="center"><img src="taxon03.png"></p>
<A HREF='#toc'>Return to table of contents</A>
<HR WIDTH='85%' ALIGN='LEFT'/>

<h3>Updating Taxonomic Information</h3>
<p><b>NOTE:</b> CYANOS searches for the appropriate taxonomic names "on demand".  
Thus, changes to these tables should only be required when there is a revision in the taxonomic hierarchy while changes in strain identification only need to happen to the strain record and the resulting taxonomy will link based upon the genus.</P>
<p>Given the "complex" nature of the two table system described in the previous section. 
Directly updating the tables via an SQL interface is <b>strongly discouraged</b>.  
This can result in inconsistencies of the taxonomic data and searching and display of taxonomic data may be impaired.
The preferred method of updating taxonomic data is to generate a spreadsheet of taxonomic data and upload to CYANOS using the upload interface.
The spreadsheet should have three columns: one for the names to be added, one for the associated level (e.g. kingdom, genus, etc.), and one for the direct parent of the name to be added.
Each name to be added should only have one row. 
<ul>
<li>It is not necessary to add all the parent records for each name, CYANOS will construct those records automatically using the name of the direct parent.</li>
<li>If the direct parent is blank in the spreadsheet, CYANOS will consider that name to be a new root taxon, e.g. a kingdom or domain.</li>
<li>If one is adding the parent or parents of a name in the same spreadsheet, ensure that the parents appear before any descendants in the spreadsheet.
CYANOS adds names sequentially in a spreadsheet and parent names must be added before any children to ensure that the <i>taxon_path</i> records are properly generated.</li>
 </ul> 
<p>Additionally, CYANOS is able to export all current taxonomic records in this format.  
Access the <b>Taxa Browser</b> via the <b>Strain</b> menu, then click on the link 
<u>Export taxonomic records</u>.  
The result will be a comma separated values (CSV) file with all taxonomic names and associated information required to upload the data into CYANOS, if required.</p>
 
<A HREF='#toc'>Return to table of contents</A>
<HR WIDTH='85%' ALIGN='LEFT'/>

<H2><A NAME='roles'>Required Roles</A></H2>
<P>Required permissions listed in this table denote the role and permission bit, in parenthesis.  Actions in
italics utilize global level permissions only.</P>
<TABLE WIDTH='80%' BORDER=1 ALIGN='CENTER'>
<TR VALIGN=TOP><TD><B>Action</B></TD><TD ALIGN='CENTER'><B>Required Permission</B></TD></TR>
<TR VALIGN=TOP><TD>Add a new strain</TD><TD ALIGN='CENTER'>culture(Create)</TD></TR>
<TR VALIGN=TOP><TD>Modify a strain</TD><TD ALIGN='CENTER'>culture(Write)</TD></TR>
<TR VALIGN=TOP><TD>Delete a strain</TD><TD ALIGN='CENTER'>culture(Delete)</TD></TR>
</TABLE>
<A HREF='#toc'>Return to table of contents</A>

<HR WIDTH='85%' ALIGN='LEFT'/>
<A HREF='toc'>Main Table of Contents</A> | <A HREF='find'>Find Help</A> | <A HREF='search'>Search Help</A>
</BODY>
</HTML>
